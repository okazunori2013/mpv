# Follow Changes of Forked/Upstream Repository.
#
# This workflow rebase-marge changes from upstream's master to origin's master. 

name: Merge upstream branches
on:
   schedule:
   - cron: "0 */6 * * *"

jobs:
  merge:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Merge upstream
      run: |
        git config --global user.email ${EMAIL}
        git config --global user.name ${NAME}
        
        git pull --unshallow
        git fetch upstream
        # upstream/master の変更をマージして origin/master にプッシュ
        git checkout master
        git merge --no-edit upstream/master
        git push origin master
      env:
        EMAIL: 92250924+okazunori2013@users.noreply.github.com
        NAME: okazu
        